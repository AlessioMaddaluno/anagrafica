<div class="container p-3">
  <h2>Ricerca</h2>
  <hr>

  <section>

        <div class="accordion mb-5" id="accordionPanel">
          <div class="accordion-item">
            <h2 class="accordion-header" id="panelsStayOpen-headingOne">
              <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true" aria-controls="panelsStayOpen-collapseOne">
                Filtri
              </button>
            </h2>
            <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse show" aria-labelledby="panelsStayOpen-headingOne">
              <div class="accordion-body">
                <form (ngSubmit)="onSearch()" [formGroup]="formRicerca">

                  <div class="row">

                  <div class="mb-3 col-sm-4">
                    <label for="inputNome" class="form-label">Nome</label>
                    <input formControlName="nome" type="text" class="form-control" id="inputNome">
                  </div>

                  <div class="mb-3 col-sm-4">
                    <label for="inputCognome" class="form-label">Cognome</label>
                    <input formControlName="cognome" type="text" class="form-control" id="inputCognome">
                  </div>

                  <div class="mb-3 col-sm-4">
                    <label for="inputCitta" class="form-label">Città</label>
                    <input formControlName="citta" type="text" class="form-control" id="inputCitta">
                  </div>

                  <div class="mb-3 col-sm-4">
                    <label for="inputDNMin" class="form-label">Data di nascita min</label>
                    <input formControlName="dataNascitaMin" type="date" class="form-control" id="inputDNMin">
                  </div>

                  <div class="mb-3 col-sm-4">
                    <label for="inputDNMax" class="form-label">Data di nascita max</label>
                    <input formControlName="dataNascitaMax" type="date" class="form-control" id="inputDNMax">
                  </div>

              </div>

                  <div class="row">
                    <div class="mb-3 col-sm-4">
                      <button type="submit" class="btn btn-primary btn-block" [disabled] = "formRicerca.invalid">Applica</button>
                    </div>
                    <div class="mb-3 col-sm-4">
                      <button (click)="onReset()" class="btn btn-secondary btn-block">Reset</button>
                    </div>
                  </div>

               </form>
              </div>
            </div>
          </div>

        </div>


  </section>

  <div *ngIf="!data.length" class="alert alert-secondary m-3 center" role="alert">
    Non sono presenti dati con questi criteri di ricerca!
  </div>

  <table *ngIf="data.length" class="table">
    <thead class="thead-dark">
      <tr>
        <th scope="col">Nome</th>
        <th scope="col">Cognome</th>
        <th scope="col">Data di nascita</th>
        <th scope="col">Città</th>
        <th class="text-center" scope="col">Modifica</th>
        <th class="text-center" scope="col">Elimina</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let persona of data">
        <td>{{ persona.nome }}</td>
        <td>{{ persona.cognome }}</td>
        <td>{{ persona.dataNascita | date : 'dd/MM/yyyy'}}</td>
        <td>{{ persona.citta }}</td>
        <td class="text-center">
          <button (click)="onEdit(persona.id)" class="btn btn-primary"><i class="fas fa-edit"></i></button>
        </td>
        <td class="text-center">
          <button (click)="onDelete(persona.id)" class="btn btn-danger"><i class="fas fa-trash"></i></button>
        </td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="data.length" class="row row justify-content-md-center">
    <div class="col-sm-12">
      <nav>
        <ul class="pagination">
          <li class="page-item" [ngClass]="{'disabled': currentPage === 0}"><a (click)="onSearch(currentPage-1)" class="page-link">Precedente</a></li>
          <li *ngFor="let item of [].constructor(totalPages); let i = index"
          class="page-item"
          [ngClass]="{'active': currentPage == i}"
          (click)="onSearch(i)"
          ><a class="page-link">{{i+1}}</a></li>
          <li class="page-item" [ngClass]="{'disabled': currentPage === totalPages-1}"><a class="page-link" (click)="onSearch(currentPage+1)" >Successivo</a></li>
        </ul>
      </nav>
    </div>
  </div>


</div>
